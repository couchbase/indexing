<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-opacity="1" color-rendering="auto" color-interpolation="auto" stroke="black" text-rendering="auto" stroke-linecap="square" width="865" stroke-miterlimit="10" stroke-opacity="1" shape-rendering="auto" fill="black" stroke-dasharray="none" font-weight="normal" stroke-width="1" height="692" font-family="'Dialog'" font-style="normal" stroke-linejoin="miter" font-size="12" stroke-dashoffset="0" image-rendering="auto">
  <!--Generated by ySVG 2.5-->
  <defs id="genericDefs"/>
  <g>
    <defs id="defs1">
      <linearGradient x1="168" gradientUnits="userSpaceOnUse" x2="177" y1="150" y2="839.6667" id="linearGradient1" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="133" gradientUnits="userSpaceOnUse" x2="213" y1="80" y2="120" id="linearGradient2" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="340" gradientUnits="userSpaceOnUse" x2="349" y1="150" y2="848.4167" id="linearGradient3" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="305" gradientUnits="userSpaceOnUse" x2="385" y1="80" y2="120" id="linearGradient4" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="503" gradientUnits="userSpaceOnUse" x2="512" y1="155.25" y2="843.4167" id="linearGradient5" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="468" gradientUnits="userSpaceOnUse" x2="548" y1="79" y2="119" id="linearGradient6" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="875" gradientUnits="userSpaceOnUse" x2="884" y1="147.75" y2="844.8333" id="linearGradient7" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="840" gradientUnits="userSpaceOnUse" x2="920" y1="77.75" y2="117.75" id="linearGradient8" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="690.5" gradientUnits="userSpaceOnUse" x2="699.5" y1="154" y2="842.1667" id="linearGradient9" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="655.5" gradientUnits="userSpaceOnUse" x2="735.5" y1="77.75" y2="117.75" id="linearGradient10" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <clipPath clipPathUnits="userSpaceOnUse" id="clipPath1">
        <path d="M0 0 L865 0 L865 692 L0 692 L0 0 Z"/>
      </clipPath>
      <clipPath clipPathUnits="userSpaceOnUse" id="clipPath2">
        <path d="M32 56 L1269.5 56 L1269.5 1046 L32 1046 L32 56 Z"/>
      </clipPath>
    </defs>
    <g fill="url(#linearGradient1)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient1)">
      <path d="M168 150 L177 150 L177 839.6667 L168 839.6667 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M168 150 L177 150 L177 839.6667 L168 839.6667 Z" clip-path="url(#clipPath2)"/>
    </g>
    <g fill="url(#linearGradient2)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient2)">
      <path d="M133 80 L213 80 L213 120 L133 120 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M133 80 L213 80 L213 120 L133 120 Z" clip-path="url(#clipPath2)"/>
      <text x="146.917" xml:space="preserve" y="104.5352" font-family="sans-serif" clip-path="url(#clipPath2)" stroke="none">Projector</text>
    </g>
    <g fill="url(#linearGradient3)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient3)">
      <path d="M340 150 L349 150 L349 848.4167 L340 848.4167 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M340 150 L349 150 L349 848.4167 L340 848.4167 Z" clip-path="url(#clipPath2)"/>
    </g>
    <g fill="url(#linearGradient4)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient4)">
      <path d="M305 80 L385 80 L385 120 L305 120 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M305 80 L385 80 L385 120 L305 120 Z" clip-path="url(#clipPath2)"/>
      <text x="325.7549" xml:space="preserve" y="104.5352" font-family="sans-serif" clip-path="url(#clipPath2)" stroke="none">Router</text>
    </g>
    <g fill="url(#linearGradient5)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient5)">
      <path d="M503 155.25 L512 155.25 L512 843.4167 L503 843.4167 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M503 155.25 L512 155.25 L512 843.4167 L503 843.4167 Z" clip-path="url(#clipPath2)"/>
    </g>
    <g fill="url(#linearGradient6)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient6)">
      <path d="M468 79 L548 79 L548 119 L468 119 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M468 79 L548 79 L548 119 L468 119 Z" clip-path="url(#clipPath2)"/>
      <text x="482.1572" xml:space="preserve" y="103.5352" font-family="sans-serif" clip-path="url(#clipPath2)" stroke="none">Indexer1</text>
    </g>
    <g fill="url(#linearGradient7)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient7)">
      <path d="M875 147.75 L884 147.75 L884 844.8333 L875 844.8333 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M875 147.75 L884 147.75 L884 844.8333 L875 844.8333 Z" clip-path="url(#clipPath2)"/>
    </g>
    <g fill="url(#linearGradient8)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient8)">
      <path d="M840 77.75 L920 77.75 L920 117.75 L840 117.75 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M840 77.75 L920 77.75 L920 117.75 L840 117.75 Z" clip-path="url(#clipPath2)"/>
      <text x="863.749" xml:space="preserve" y="95.2188" font-family="sans-serif" clip-path="url(#clipPath2)" stroke="none">Index</text>
      <text x="854.9424" xml:space="preserve" y="109.3516" font-family="sans-serif" clip-path="url(#clipPath2)" stroke="none">Manager</text>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" font-family="sans-serif" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <text x="183.0713" xml:space="preserve" y="184.5352" clip-path="url(#clipPath2)" stroke="none">1. Subscribe UPR</text>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" font-family="sans-serif" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <text x="183.543" xml:space="preserve" y="219.5352" clip-path="url(#clipPath2)" stroke="none">2. Receive INSERT</text>
      <text x="183.3633" xml:space="preserve" y="287.5352" clip-path="url(#clipPath2)" stroke="none">4. Send to Router</text>
      <text x="182.2197" xml:space="preserve" y="252.5352" clip-path="url(#clipPath2)" stroke="none">3. Extract Secondary Key</text>
      <text x="354.9012" xml:space="preserve" y="353.4023" clip-path="url(#clipPath2)" stroke="none">5. Decide recepient </text>
      <text x="354.9012" xml:space="preserve" y="367.5352" clip-path="url(#clipPath2)" stroke="none">Indexers based on </text>
      <text x="354.9012" xml:space="preserve" y="381.668" clip-path="url(#clipPath2)" stroke="none">IndexId and Partition Key</text>
      <text x="352.1388" xml:space="preserve" y="416.4023" clip-path="url(#clipPath2)" stroke="none">6. Send INSERT msg </text>
      <text x="352.1388" xml:space="preserve" y="430.5352" clip-path="url(#clipPath2)" stroke="none">to matching Indexer</text>
      <text x="352.1388" xml:space="preserve" y="444.668" clip-path="url(#clipPath2)" stroke="none">(Indexer1)</text>
      <text x="361.3155" xml:space="preserve" y="500.4023" clip-path="url(#clipPath2)" stroke="none">7. Send DELETE msg</text>
      <text x="361.3155" xml:space="preserve" y="514.5352" clip-path="url(#clipPath2)" stroke="none">to all indexers</text>
      <text x="361.3155" xml:space="preserve" y="528.668" clip-path="url(#clipPath2)" stroke="none">for this index</text>
      <text x="523.8594" xml:space="preserve" y="502.0468" clip-path="url(#clipPath2)" stroke="none">8. Add INSERT to </text>
      <text x="528.4707" xml:space="preserve" y="516.1796" clip-path="url(#clipPath2)" stroke="none">Mutation Queue</text>
      <text x="524.719" xml:space="preserve" y="602.3633" clip-path="url(#clipPath2)" stroke="none">10. Add DELETE to</text>
      <text x="524.719" xml:space="preserve" y="616.4961" clip-path="url(#clipPath2)" stroke="none">Mutation Queue</text>
      <text x="893.1727" xml:space="preserve" y="642.1016" clip-path="url(#clipPath2)" stroke="none">12. Stability Timestamp  </text>
      <text x="893.1727" xml:space="preserve" y="656.2344" clip-path="url(#clipPath2)" stroke="none">Generation Decision </text>
      <text x="893.1727" xml:space="preserve" y="670.3672" clip-path="url(#clipPath2)" stroke="none">Reached</text>
      <text x="524.2695" xml:space="preserve" y="537.4688" clip-path="url(#clipPath2)" stroke="none">9. Update High </text>
      <text x="524.2695" xml:space="preserve" y="551.6016" clip-path="url(#clipPath2)" stroke="none">Watermark Timestamp</text>
      <text x="527.2695" xml:space="preserve" y="639.4688" clip-path="url(#clipPath2)" stroke="none">11. Update High </text>
      <text x="527.2695" xml:space="preserve" y="653.6016" clip-path="url(#clipPath2)" stroke="none">Watermark Timestamp</text>
      <text x="522.7285" xml:space="preserve" y="743.6523" clip-path="url(#clipPath2)" stroke="none">14. Persist MutationQ.</text>
      <text x="522.7285" xml:space="preserve" y="757.7852" clip-path="url(#clipPath2)" stroke="none">(Apply Insert, Skip Delete)</text>
      <text x="522.7285" xml:space="preserve" y="771.918" clip-path="url(#clipPath2)" stroke="none">Update Stability Timestamp</text>
      <text x="892.5352" xml:space="preserve" y="698.7711" clip-path="url(#clipPath2)" stroke="none">13. Send message </text>
      <text x="892.5352" xml:space="preserve" y="712.9039" clip-path="url(#clipPath2)" stroke="none">to all Indexers</text>
      <text x="521.0498" xml:space="preserve" y="794.0352" clip-path="url(#clipPath2)" stroke="none">15. Send Ack to IM</text>
      <text x="896.3105" xml:space="preserve" y="824.9688" clip-path="url(#clipPath2)" stroke="none">16. Update Stability </text>
      <text x="896.3105" xml:space="preserve" y="839.1016" clip-path="url(#clipPath2)" stroke="none">Timestamp</text>
    </g>
    <g fill="url(#linearGradient9)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient9)">
      <path d="M690.5 154 L699.5 154 L699.5 842.1667 L690.5 842.1667 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M690.5 154 L699.5 154 L699.5 842.1667 L690.5 842.1667 Z" clip-path="url(#clipPath2)"/>
    </g>
    <g fill="url(#linearGradient10)" text-rendering="geometricPrecision" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke="url(#linearGradient10)">
      <path d="M655.5 77.75 L735.5 77.75 L735.5 117.75 L655.5 117.75 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <path fill="none" d="M655.5 77.75 L735.5 77.75 L735.5 117.75 L655.5 117.75 Z" clip-path="url(#clipPath2)"/>
      <text x="669.6572" xml:space="preserve" y="102.2852" font-family="sans-serif" clip-path="url(#clipPath2)" stroke="none">Indexer2</text>
    </g>
    <g text-rendering="geometricPrecision" stroke-miterlimit="1.45" shape-rendering="geometricPrecision" font-family="sans-serif" transform="matrix(0.699,0,0,0.699,-22.3677,-39.1434)" stroke-linecap="butt">
      <text x="709.9025" xml:space="preserve" y="606.6133" clip-path="url(#clipPath2)" stroke="none">10. Add DELETE to</text>
      <text x="709.9025" xml:space="preserve" y="620.7461" clip-path="url(#clipPath2)" stroke="none">Mutation Queue</text>
      <text x="709.0195" xml:space="preserve" y="643.7188" clip-path="url(#clipPath2)" stroke="none">11. Update High </text>
      <text x="709.0195" xml:space="preserve" y="657.8516" clip-path="url(#clipPath2)" stroke="none">Watermark Timestamp</text>
      <text x="708.4785" xml:space="preserve" y="742.4023" clip-path="url(#clipPath2)" stroke="none">14. Persist MutationQ.</text>
      <text x="708.4785" xml:space="preserve" y="756.5352" clip-path="url(#clipPath2)" stroke="none">(Apply Delete if Key Exists)</text>
      <text x="708.4785" xml:space="preserve" y="770.668" clip-path="url(#clipPath2)" stroke="none">Update Stability Timestamp</text>
      <text x="706.7998" xml:space="preserve" y="792.7852" clip-path="url(#clipPath2)" stroke="none">15. Send Ack to IM</text>
      <path fill="none" d="M177.5 324.1667 L330.7501 324.8916" clip-path="url(#clipPath2)"/>
      <path d="M338.75 324.9295 L326.7738 319.8728 L329.7501 324.8869 L326.7265 329.8727 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M349.0177 461.5669 L425.7616 461.2414 L494.5006 462.1148" clip-path="url(#clipPath2)"/>
      <path d="M502.5 462.2165 L490.5645 457.0644 L493.5007 462.1021 L490.4374 467.0636 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M349.0168 562.0383 L425.9873 561.4072 L494.9591 561.8164" clip-path="url(#clipPath2)"/>
      <path d="M502.959 561.8639 L490.9889 556.7927 L493.9591 561.8105 L490.9295 566.7926 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M512.0099 815.2602 L866.9917 813.8387" clip-path="url(#clipPath2)"/>
      <path d="M874.9916 813.8067 L862.9717 808.8548 L865.9917 813.8428 L863.0118 818.8547 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M874.9854 714.8931 L695.0142 714.0626 L522.9999 715.0457" clip-path="url(#clipPath2)"/>
      <path d="M515 715.0914 L527.0284 720.0228 L523.9999 715.04 L526.9713 710.0229 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M349.0116 583.8492 L519.5031 582.4219 L682 582.0568" clip-path="url(#clipPath2)"/>
      <path d="M690 582.0388 L677.9888 577.0658 L681 582.059 L678.0113 587.0657 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M874.9616 697.4535 L787.2489 696.6768 L707.5336 697.0595" clip-path="url(#clipPath2)"/>
      <path d="M699.5337 697.0979 L711.5576 702.0403 L708.5336 697.0547 L711.5096 692.0403 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M699.5244 829.814 L867.0308 829.209" clip-path="url(#clipPath2)"/>
      <path d="M875.0307 829.1801 L863.0128 824.2234 L866.0308 829.2126 L863.0488 834.2234 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
  </g>
</svg>
